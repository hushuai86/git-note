<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-2b594ad0-70e2-491c-8b7c-16297054ae57"></attachment><h1>Ocean - Kafka Message FormatOcean - Kafka Message Format</h1><p>一.源Topic</p><p><br></p><p>devices:</p><p>key : deviceId&nbsp;</p><p><br></p><p>create /update</p><p>{</p><p>&nbsp;&nbsp;"messageId": "&lt;UUID&gt;",</p><p>&nbsp;&nbsp;"deviceId": "&lt;Device UUID&gt;",</p><p>&nbsp;&nbsp;"siteId": "&lt;Site ID&gt;",</p><p>&nbsp;&nbsp;"deviceName": "&lt;equipment&gt;",</p><p>&nbsp;&nbsp;"subId": "&lt;sub-Id&gt;",</p><p>&nbsp;&nbsp;"building": "&lt;building&gt;",</p><p>&nbsp;&nbsp;"floor": "&lt;floor ID&gt;",</p><p>&nbsp;&nbsp;"roomId": "&lt;Room&gt;",</p><p>&nbsp;&nbsp;"description": "&lt;Description&gt;",</p><p>&nbsp;&nbsp;"ipAddress": "&lt;IP Address&gt;",</p><p>&nbsp;&nbsp;"slaveId": "&lt;Slave ID&gt;",</p><p>&nbsp;&nbsp;"groups": [</p><p>&nbsp;&nbsp;&nbsp;&nbsp;{"group": "group1"},</p><p>&nbsp;&nbsp;&nbsp;&nbsp;{"group": "group2"}</p><p>&nbsp;&nbsp;],</p><p>&nbsp;&nbsp;"protocol": "&lt;Protocol&gt;",</p><p>&nbsp;&nbsp;"telemetries": [</p><p>&nbsp;&nbsp;&nbsp;&nbsp;{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name": "&lt;measurePoint&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"description": "&lt;description&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"unit": "&lt;uom&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"interval": "&lt;interval&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>&nbsp;&nbsp;],</p><p>&nbsp;&nbsp;"ts": &lt;timestamp&gt;</p><p>}</p><p><br></p><p><span style="color: rgb(51, 51, 51);">例：</span></p><p>{"ipAddress":"192.168.95.34","messageId":"ec68c0d3-4d7b-449b-b33a-4870cfb33d33","description":"","groups":[],"deviceId":"4","deviceName":"DCT2_RF_MRS-COC-52A1-01","equipmentId":"MRS","building":"DCT2","roomId":"COC-52A1","subId":"01","protocol":"SNMP","slaveId":"1","action":"create","siteId":"TKO","floor":"RF","ts":1594287089672,"telemetries":[{"unit":"C","alarms":"","name":"Temp","description":"Temperature","interval":"5000"},{"unit":"%","alarms":"","name":"Hum","description":"Humidity","interval":"5000"},{"unit":"","alarms":"","name":"Dew","description":"Dew Point","interval":"5000"}]}</p><p><br></p><p><br></p><p>delete/start/stop</p><p>{&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;"messageId": "&lt;UUID&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"deviceId": "&lt;Device UUID&gt;"，</p><p>&nbsp;&nbsp;"action":"&lt;action&gt;",</p><p>&nbsp;&nbsp;"ts":&lt;timestamp&gt;</p><p>}</p><p><br></p><p><span style="color: rgb(51, 51, 51);">例：</span></p><p>{"messageId":"ec68c0d3-4d7b-449b-b33a-4870cfb33d33","action":"delete","deviceId":"4","ts":1594287089672}</p><p><br></p><p>telemetry</p><p>{</p><p>&nbsp;&nbsp;"messageId": "&lt;Message UUID&gt;",</p><p>&nbsp;&nbsp;"agentId": "&lt;Agent UUID&gt;",</p><p>&nbsp;&nbsp;"deviceId": "&lt;Device UUID&gt;",</p><p>&nbsp;&nbsp;"deviceName": "&lt;Device Name&gt;",</p><p>&nbsp;&nbsp;"measurePoint": "&lt;Measure Point Name&gt;",</p><p>&nbsp;&nbsp;"value": &lt;Measure Point Value&gt;,</p><p>&nbsp;&nbsp;"ts": &lt;Timestamp &gt;</p><p>}</p><p>例：</p><p>{"agentId":"acda9848-34c5-42aa-8dfe-4fa60f12eda6","measurePoint":"Temperature","messageId":"fbbfc9df-34c4-4678-bb98-cfdf0dba9386","deviceName":"DCT2_RF_MRS-COC-52A1-01","deviceId":"1","value":23.42,"ts":1594422518475}</p><p><br></p><p>error</p><p>{</p><p>&nbsp;&nbsp;&nbsp;"agentId":"&lt;agentId&gt;",</p><p>&nbsp;&nbsp;&nbsp;"channelIp":"&lt;channelIp&gt;",</p><p>&nbsp;&nbsp;&nbsp;"channelNo":"&lt;channelNo&gt;",</p><p>&nbsp;&nbsp;&nbsp;"channelPort":"&lt;channelPort&gt;",</p><p>&nbsp;&nbsp;"deviceId":"&lt;deviceId&gt;",</p><p>&nbsp;&nbsp;&nbsp;"deviceName":"&lt;deviceName&gt;",</p><p>&nbsp;&nbsp;&nbsp;"issueCodeNo":"&lt;issueCodeNo&gt;",</p><p>&nbsp;&nbsp;&nbsp;"issueStatus":"&lt;issueStatus&gt;",</p><p>&nbsp;&nbsp;&nbsp;"messageId":"&lt;messageId&gt;",</p><p>&nbsp;&nbsp;&nbsp;"pointExmsg":"&lt;pointExmsg&gt;",</p><p>&nbsp;&nbsp;&nbsp;"pointId":"&lt;pointId&gt;",</p><p>&nbsp;&nbsp;&nbsp;"pointLastpollingtime":&lt;pointLastpollingtime&gt;,</p><p>&nbsp;&nbsp;&nbsp;"pointName":"&lt;pointName&gt;",</p><p>&nbsp;&nbsp;&nbsp;"recTs":&lt;recTs&gt;</p><p>}</p><p><br></p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"agentId":"&lt;agentId&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"channelIp":"&lt;channelIp&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"channelNo":"&lt;channelNo&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"channelPort":"&lt;channelPort&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"deviceId":"&lt;deviceId&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"deviceName":"&lt;deviceName&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"issueCodeNo":"&lt;issueCodeNo&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"issueStatus":"&lt;issueStatus&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"messageId":"&lt;messageId&gt;",</p><p>&nbsp;&nbsp;"pointExcode":"&lt;pointExcode&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"pointExmsg":"&lt;pointExmsg&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"pointId":"&lt;pointId&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"pointLastpollingtime":&lt;pointLastpollingtime&gt;,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"pointName":"&lt;pointName&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"recTs":&lt;recTs&gt;</p><p>}</p><p><br></p><p>{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"agentId":"&lt;agentId&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"channelIp":"&lt;channelIp&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"channelNo":"&lt;channelNo&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"channelPort":"&lt;channelPort&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"deviceId":"&lt;deviceId&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"deviceName":"&lt;deviceName&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"issueCodeNo":"&lt;issueCodeNo&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"issueStatus":"&lt;issueStatus&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"messageId":"&lt;messageId&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"pointExmsg":"&lt;pointExmsg&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"pointId":"&lt;pointId&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"pointName":"&lt;pointName&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"recTs":&lt;recTs&gt;</p><p>}</p><p>例：</p><p>{"agentId":"0561fd5e-6e78-4b32-b5e0-c60fa33984f6","channelIp":"10.104.2.8","channelNo":"15","channelPort":"502","deviceId":"1","deviceName":"DCT2_RF_MRS-COC-52A1-01","issueCodeNo":"AP-03","issueStatus":"fail","messageId":"18e65a0f-0aca-4814-a44b-cedd2e189e20","pointExmsg":"","pointId":"mobsrwkwln","pointLastpollingtime":1605857220811,"pointName":"16L1-OFS","recTs":1605857242772}</p><p><br></p><p>{"agentId":"63a8b2d4-cb64-4343-8795-9256a7aba115","channelIp":"10.103.3.20","channelNo":"68","channelPort":"502","deviceName":"DCT2_3F_ULVSB-UPR-32A1-01-5B","issueCodeNo":"AP-02","issueStatus":"fail","messageId":"1befe9ae-b96b-4290-99c1-a1446e7dbf0a","pointExcode":4,"pointExmsg":"execute MB function failure","pointId":"mobsfcdqep","pointName":"HMAL1-23","recTs":1606366968534}</p><p><br></p><p>{"agentId":"63a8b2d4-cb64-4343-8795-9256a7aba115","channelIp":"</p><p>10.103.3.20","channelNo":"68","channelPort":"502","deviceName":"DCT2_3F_ULVSB-UPR-32A1-01-5B","issueCodeNo":"AP-02","issueStatus":"fail","messageId":"1befe9ae-b96b-4290-99c1-a1446e7dbf0a","pointExcode":4,"pointExmsg":"execute MB function failure","pointId":"mobsfcdqep","pointLastpollingtime":1606366963464,"pointName":"HMAL1-23","pointResponsetime":308,"recTs":1606366968534}</p><p><br></p><p>agentAlert</p><p>{</p><p>&nbsp;&nbsp;"messageId": "&lt;UUID&gt;",</p><p>&nbsp;&nbsp;"deviceId": "&lt;deviceId&gt;",</p><p>&nbsp;&nbsp;"deviceName":&lt;deviceName&gt;",</p><p>&nbsp;&nbsp;"measurePoint": "&lt;Measure Point Name&gt;",</p><p>&nbsp;"value"：&lt;Measure Point Value&gt;</p><p>&nbsp;&nbsp;"threshold": "&lt;threshold value&gt;",</p><p>&nbsp;&nbsp;"alertLevel": "&lt;level&gt;",</p><p>&nbsp;"alarmStatus":"&lt;active/clear&gt;"</p><p>&nbsp;&nbsp;"ts": &lt;timestamp&gt;</p><p>}</p><p>例：</p><p>{"messageId": "81c84716-9f96-4a5d-8a4c-1b325d1e8215","deviceId": "1","deviceName":"DCT2_2F_ULVSB-UPR-23A1-02-0E","measurePoint": "VOLT-L1","value":36,"settingId":"823d399c-5315-4e86-91d4-e9f086a3c849","threshold": "34","alertLevel": "Minor","alarmStatus": "active","ts":1606126697981}</p><p><br></p><p>二.程序派生Topic</p><p><br></p><p>hallAlarm&nbsp;</p><p>{</p><p>&nbsp;"siteId":"&lt;siteId&gt;",</p><p>&nbsp;"buildingId":"&lt;buildingId&gt;",</p><p>&nbsp;"floorId":"&lt;floorId&gt;",</p><p>&nbsp;&nbsp;"hallId":"&lt;hallId&gt;",</p><p>&nbsp;&nbsp;"messageId": "&lt;UUID&gt;",</p><p>&nbsp;&nbsp;"deviceId": "&lt;deviceId&gt;",</p><p>&nbsp;&nbsp;"deviceName":&lt;deviceName&gt;",</p><p>&nbsp;&nbsp;"&lt;measurePoint&gt;": "&lt;Measure Point Name&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"&lt;value&gt;"："&lt;Measure Point Value&gt;"</p><p>&nbsp;&nbsp;"threshold": "&lt;threshold value&gt;",</p><p>&nbsp;&nbsp;"alertLevel": "&lt;level&gt;",</p><p>&nbsp;&nbsp;"ts": &lt;timestamp&gt;</p><p>}</p><p><br></p><p><br></p><p>floorAlarm | buildingAlarm | siteAlarm</p><p>{</p><p>&nbsp;&nbsp;&nbsp;"siteId":"&lt;siteId&gt;",</p><p>&nbsp;&nbsp;&nbsp;"buildingId":"&lt;buildingId&gt;",</p><p>&nbsp;&nbsp;&nbsp;"floorId":"&lt;floorId&gt;",</p><p>&nbsp;&nbsp;&nbsp;"hallId":"&lt;hallId&gt;",</p><p>&nbsp;&nbsp;&nbsp;"urgentCount":"&lt;urgentCount&gt;",</p><p>&nbsp;&nbsp;&nbsp;"criticalCount":"&lt;criticalCount&gt;",</p><p>&nbsp;&nbsp;&nbsp;"warningCount":"&lt;warningCount&gt;",</p><p>&nbsp;&nbsp;&nbsp;"minorCount":"&lt;minorCount&gt;",</p><p>&nbsp;&nbsp;&nbsp;"type":"&lt;type&gt;",</p><p>&nbsp;&nbsp;&nbsp;"ts":&lt;ts&gt;,</p><p>}</p><p><br></p><p>hallTelemetry</p><p>{</p><p>&nbsp;&nbsp;"hallId": "&lt;hallId&gt;",</p><p>&nbsp;&nbsp;"floorId": "&lt;floorId&gt;",</p><p>&nbsp;&nbsp;"buildingId": "&lt;buildingId&gt;",</p><p>&nbsp;&nbsp;"siteId": "&lt;siteId&gt;",</p><p>&nbsp;&nbsp;"messageId": "&lt;Message UUID&gt;",</p><p>&nbsp;&nbsp;"agentId": "&lt;Agent UUID&gt;",</p><p>&nbsp;&nbsp;"deviceId": "&lt;Device UUID&gt;",</p><p>&nbsp;&nbsp;"deviceName": "&lt;Device Name&gt;",</p><p>&nbsp;&nbsp;"measurePoint": "&lt;Measure Point Name&gt;",</p><p>&nbsp;&nbsp;"value": &lt;Measure Point Value&gt;,</p><p>&nbsp;&nbsp;"ts": &lt;Timestamp&gt;</p><p>}</p><p><br></p><p>buildingTelemetry | siteTelemetry</p><p>{</p><p>&nbsp;&nbsp;&nbsp;"siteId":"&lt;siteId&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"buildingId":"&lt;buildingId&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"hallId":"&lt;hallId&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"value":&lt;value&gt;,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"percentage":"&lt;percentage&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"type":"&lt;type&gt;",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"ts":&lt;ts&gt;</p><p>}</p><p><br></p><p>telemetry_60s | telemetry_300s | telemetry_900s | telemetry_3600s | telemetry_86400s</p><p>{</p><p>&nbsp;&nbsp;&nbsp;"deviceId":"&lt;deviceId&gt;",</p><p>&nbsp;&nbsp;&nbsp;"pointName":"&lt;measurePoint&gt;",</p><p>&nbsp;&nbsp;&nbsp;"value":&lt;value&gt;,</p><p>&nbsp;&nbsp;"ts":&lt;ts&gt;</p><p>}</p><p><br></p><p><br></p><p><br></p><p><br></p>