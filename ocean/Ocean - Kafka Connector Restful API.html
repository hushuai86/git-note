<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-e1d32785-40d9-4873-bd8e-906aee594139"></attachment><h1>Ocean - Kafka Connector Restful APIOcean - Kafka Connector Restful API</h1><p> Restful API</p><p>#新建一个connector</p><p>curl -s -X POST -H "Content-Type: application/json" --data '{"name": "mqtt-connector","config":{"connector.class":"io.confluent.connect.mqtt.MqttSourceConnector","mqtt.server.uri":"<a href="about:blank" target="_blank">tcp://192.168.96.141","mqtt.topics":"187bf69e-5e96-11ea-bc55-0242ac130003/telemetry",confluent.topic":"mqtt-device","confluent.topic.bootstrap.servers":"localhost:9092","tasks.max":"1</a>"}}' <a href="http://localhost:8083/connectors/" target="_blank">http://localhost:8083/connectors/</a></p><p><br></p><p>#新建一个connector，可将connector的配置写在json文件中</p><p>curl -s -X POST -H 'Content-Type: application/json' --data @/tmp/kafka-test/kafka-connect-redis.json <a href="http://localhost:8083/connectors" target="_blank">http://localhost:8083/connectors</a></p><p><br></p><p>#查看某个connector的运行状态</p><p>curl -s localhost:8083/connectors/mysql-sink/status</p><p>curl -s http://192.168.118.115:32668/connectors/redis-sink/status</p><p>curl -s http://192.168.118.115:32668/connectors/mysql-sink/status</p><p>curl -s http://192.168.118.115:32668/connectors/cassandra-sink/status</p><p><br></p><p>curl -s kafka-connect-sink.ocean-operator-portal:8083/connectors/</p><p>#查看所有正在运行的connetcotr</p><p>curl -s localhost:8084/connectors.</p><p>curl -s http://192.168.118.115:32668/connectors/</p><p><br></p><p>#删除某个connector</p><p>curl -s -X DELETE localhost:8083/connectors/mysql-sink</p><p>curl -s -X DELETE http://192.168.118.115:32668/connectors/cassandra-sink</p><p><br></p><p>#暂停某个connector</p><p>curl -s -X PUT localhost:8083/connectors/mqtt-connector/pause</p><p><br></p><p>#重新开始某个connector</p><p>curl -s -X PUT localhost:8083/connectors/mqtt-connector/resume</p><p><br></p><p><br></p><p>redis connector&nbsp;</p><p>curl <a href="http://localhost:8083/connectors/" target="_blank">http://192.168.118.115:32668/connectors/</a> -X POST -i -H "Content-Type:application/json" -d '{</p><p>&nbsp;&nbsp;&nbsp;"name":"redis-sink",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"config":{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":"redis-sink",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"connector.class" : "com.github.jcustenborder.kafka.connect.redis.RedisSinkConnector",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics":"telemetry",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.client.mode":"Standalone",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.auto.reconnect.enabled":"true",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.hosts":"192.168.130.148:6379",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.masterId":"master",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.database":"0",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.password":"1qaz2wsx",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"tasks.max":"1",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"key.converter":"org.apache.kafka.connect.storage.StringConverter",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"value.converter":"org.apache.kafka.connect.storage.StringConverter",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.database":"0"</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>}'</p><p><br></p><p><br></p><p>curl http://localhost:8083/connectors/ -X POST -i -H "Content-Type:application/json" -d '{</p><p>&nbsp;&nbsp;&nbsp;"name":"redis-sink",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"config":{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":"redis-sink",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"connector.class" : "com.github.jcustenborder.kafka.connect.redis.RedisSinkConnector",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics":"telemetry",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.client.mode":"Sentinel",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.auto.reconnect.enabled":"true",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.hosts":"localhost:26379",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.masterId":"master",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.database":"0",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"tasks.max":"1",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"key.converter":"org.apache.kafka.connect.storage.StringConverter",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"value.converter":"org.apache.kafka.connect.storage.StringConverter",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"redis.database":"0"</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>}'</p><p><br></p><p>mysql connector&nbsp;</p><p>curl -s -X POST -H "Content-Type: application/json" --data '{</p><p>&nbsp;&nbsp;&nbsp;"name":"mysql-sink",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"config":{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"connector.class":"com.accentrix.kafka.connect.mysql.MysqlSinkConnector",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"tasks.max":"1",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics":"devices",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"connection.url":"jdbc:<a href="about:blank" target="_blank">mysql://192.168.118.219:3306/ocean</a>",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"connection.user":"root",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"connection.password":"1qaz2wsx",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"max.retries":"10",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"retry.backoff.ms":"3000"</p><p>&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>}' <a href="http://localhost:8083/connectors/" target="_blank">http://192.168.118.115:32668/connectors/</a></p><p><br></p><p><br></p><p>curl -s -X POST -H "Content-Type: application/json" --data '{</p><p>&nbsp;&nbsp;&nbsp;"name":"mysql-sink",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"config":{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"connector.class":"com.accentrix.kafka.connect.mysql.MysqlSinkConnector",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"tasks.max":"1",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics":"devices",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"connection.url":"jdbc:mysql://localhost:3306/ocean",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"connection.user":"root",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"connection.password":"1qaz2wsx",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"max.retries":"10",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"retry.backoff.ms":"3000"</p><p>&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>}' http://localhost:8083/connectors/</p><p><br></p><p>cassandra connector</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"cassandra.username":"cassandra",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"cassandra.password":"cassandra",</p><p><br></p><p>curl 'http://192.168.118.115:32668/connectors/' -X POST -i -H "Content-Type:application/json" -d '{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"name":"cassandra-sink",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"config":{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"connector.class":"com.accentrix.kafka.connect.cassandra.sink.CassandraSinkConnector",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"tasks.max":"10",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics":"telemetry,telemetry_60s,telemetry_300s,telemetry_900s,telemetry_3600s,telemetry_86400s,error",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"cassandra.host":"192.168.118.219",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"cassandra.port":"9042",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"cassandra.keyspace.name":"ocean",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"batch.size":"3000",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"max.retries":"1000000000",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"retry.backoff.ms":"3000",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.telemetry":"messageId,agentId,deviceId,measurePoint,double_value,string_value,boolean_value,ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.telemetry_60s":"deviceId,pointName,double_value,string_value,boolean_value,ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.telemetry_300s":"deviceId,pointName,double_value,string_value,boolean_value,ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.telemetry_900s":"deviceId,pointName,double_value,string_value,boolean_value,ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.telemetry_3600s":"deviceId,pointName,double_value,string_value,boolean_value,ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.telemetry_86400s":"deviceId,pointName,double_value,string_value,boolean_value,ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.error":"agentId,channelIp,channelNo,channelPort,deviceId,deviceName,issueCodeNo,issueStatus,messageId,pointExmsg,pointId,pointLastpollingtime,pointName,recTs",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.telemetry":"ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.telemetry_60s":"ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.telemetry_300s":"ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.telemetry_900s":"ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.telemetry_3600s":"ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.telemetry_86400s":"ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.error":"pointLastpollingtime,recTs",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ttl.telemetry":"14d",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ttl.telemetry_60s":"2y",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ttl.telemetry_300s":"2h",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ttl.telemetry_900s":"2h",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ttl.telemetry_3600s":"7y",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ttl.telemetry_86400s":"7d"</p><p>&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>}'</p><p><br></p><p>curl 'http://localhost:8083/connectors/' -X POST -i -H "Content-Type:application/json" -d '{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"name":"cassandra-sink",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"config":{</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"connector.class":"com.accentrix.kafka.connect.cassandra.sink.CassandraSinkConnector",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"tasks.max":"10",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics":"telemetry,telemetry_60s,telemetry_300s,telemetry_900s,telemetry_3600s,telemetry_86400s,error",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"cassandra.host":"localhost",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"cassandra.port":"9042",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"cassandra.keyspace.name":"ocean",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"batch.size":"3000",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"max.retries":"1000000000",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"retry.backoff.ms":"3000",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.telemetry":"messageId,agentId,deviceId,measurePoint,double_value,string_value,boolean_value,ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.telemetry_60s":"deviceId,pointName,double_value,string_value,boolean_value,ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.telemetry_300s":"deviceId,pointName,double_value,string_value,boolean_value,ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.telemetry_900s":"deviceId,pointName,double_value,string_value,boolean_value,ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.telemetry_3600s":"deviceId,pointName,double_value,string_value,boolean_value,ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.telemetry_86400s":"deviceId,p&nbsp;&nbsp;&nbsp;ointName,double_value,string_value,boolean_value,ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.fields.error":"agentId,channelIp,channelNo,channelPort,deviceId,deviceName,issueCodeNo,issueStatus,messageId,pointExmsg,pointId,pointLastpollingtime,pointName,recTs",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.telemetry":"ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.telemetry_60s":"ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.telemetry_300s":"ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.telemetry_900s":"ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.telemetry_3600s":"ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.telemetry_86400s":"ts",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"topics.valid.tsFields.error":"pointLastpollingtime,recTs",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ttl.telemetry":"14d",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ttl.telemetry_60s":"2y",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ttl.telemetry_300s":"2h",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ttl.telemetry_900s":"2h",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ttl.telemetry_3600s":"7y",</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ttl.telemetry_86400s":"7d"</p><p>&nbsp;&nbsp;&nbsp;&nbsp;}</p><p>}'</p><p><br></p>